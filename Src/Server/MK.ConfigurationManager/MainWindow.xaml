<Window x:Class="MK.ConfigurationManager.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="800" Width="800">
    <StackPanel Margin="0,0,0,0">
        <TabControl HorizontalAlignment="Left" VerticalAlignment="Top" MinHeight="737" Width="792">
            <TabItem Header="Companies">
                <ScrollViewer>
                    <StackPanel Background="#FFE5E5E5" Height="709" VerticalAlignment="Top">
                        <Button x:Name="addCompabyBt" Content="Add a new Company" Width="250" HorizontalAlignment="Left" Margin="10,10,10,10" Click="addCompabyBt_Click"/>
                        <ComboBox DisplayMemberPath="Name" SelectedItem="{Binding CurrentCompany,Mode=TwoWay}" ItemsSource="{Binding Companies}" x:Name="companiesList" Width="250" HorizontalAlignment="Left" Margin="10,10,10,10"/>
                        <TextBox x:Name="companyName" Text="{Binding CurrentCompany.Name, Mode=TwoWay}" Width="250" HorizontalAlignment="Left" Margin="10,10,10,10" />
                        <DataGrid CanUserAddRows="True" CanUserDeleteRows="True" HorizontalAlignment="Left" Margin="10,10,10,10" Width="672" MinHeight="200" AutoGenerateColumns="False" ItemsSource="{Binding ConfigurationProperties}" Height="423">
                            <DataGrid.Columns>
                                <DataGridTextColumn Width="250" Header="Key" Binding="{Binding Key}" />
                                <DataGridTextColumn Width="250" Header="Value" Binding="{Binding Value}" />
                            </DataGrid.Columns>
                        </DataGrid>
                        <Button Content="Save" HorizontalAlignment="Left" Margin="10,10,10,10" Width="500" Click="SaveCompany" />
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
            <TabItem Header="IBS Servers">
                <StackPanel Background="#FFE5E5E5">
                    <DataGrid  CanUserAddRows="True" CanUserDeleteRows="True" HorizontalAlignment="Left" Margin="10,10,10,10" Width="650" MinHeight="200" AutoGenerateColumns="False" ItemsSource="{Binding IBSServers}" Height="194">
                        <DataGrid.Columns>
                            <DataGridTextColumn Width="100" Header="Name" Binding="{Binding Name}" />
                            <DataGridTextColumn Width="250" Header="Url" Binding="{Binding Url}" />
                            <DataGridTextColumn Width="100" Header="Username" Binding="{Binding Username}" />
                            <DataGridTextColumn Width="100" Header="Password" Binding="{Binding Password}" />
                        </DataGrid.Columns>
                    </DataGrid>
                    <Button Content="Save" HorizontalAlignment="Left" Margin="10,10,10,10" Width="125" Click="SaveIBSServer" />
                </StackPanel>
            </TabItem>
            <TabItem Header="Envrionnements">
                <StackPanel Background="#FFE5E5E5">
                    <DataGrid  CanUserAddRows="True" CanUserDeleteRows="True" HorizontalAlignment="Left" Margin="10,10,10,10" Width="650" MinHeight="200" AutoGenerateColumns="False" ItemsSource="{Binding TaxiHailEnvironments}" Height="194">
                        <DataGrid.Columns>
                            <DataGridTextColumn Width="100" Header="Name" Binding="{Binding Name}" />
                            <DataGridTextColumn Width="250" Header="Ip" Binding="{Binding IP}" />
                            <DataGridTextColumn Width="100" Header="Url" Binding="{Binding Url}" />
                            <DataGridTextColumn Width="100" Header="SqlServerInstance" Binding="{Binding SqlServerInstance}" />
                            <DataGridTextColumn Width="100" Header="WebSitesFolder" Binding="{Binding WebSitesFolder}" />
                        </DataGrid.Columns>
                    </DataGrid>
                    <Button Content="Save" HorizontalAlignment="Left" Margin="10,10,10,10" Width="125" Click="SaveTaxiHailEnvironment" />
                </StackPanel>
            </TabItem>
            <TabItem Header="Deploy">
                <StackPanel Background="#FFE5E5E5">
                    <Button Content="Refresh" HorizontalAlignment="Left" Margin="10,10,10,10" Width="125" Click="RefreshDeployments" />
                    <DataGrid  CanUserAddRows="False" CanUserDeleteRows="False" HorizontalAlignment="Left" Margin="10,10,10,10" Width="650" MinHeight="200" AutoGenerateColumns="False" ItemsSource="{Binding DeploymentJobs}" Height="194">
                        <DataGrid.Columns>
                            <DataGridTextColumn Width="100" Header="Company" Binding="{Binding Company.Name}" />
                            <DataGridTextColumn Width="100" Header="Environnement" Binding="{Binding TaxHailEnv.Name}" />
                            <DataGridTextColumn Width="100" Header="IBSServer" Binding="{Binding IBSServer.Name}" />
                            <DataGridTextColumn Width="100" Header="Status" Binding="{Binding Status}" />
                            <DataGridTextColumn Width="250" Header="Details" Binding="{Binding Details}" />
                        </DataGrid.Columns>
                    </DataGrid>
                    <GroupBox Margin="10,10,26,10" Header="New Deployment">
                        <ScrollViewer>
                            <StackPanel>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="100" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition />
                                    <RowDefinition />
                                    <RowDefinition />
                                    <RowDefinition />
                                    <RowDefinition />
                                    <RowDefinition />
                                    <RowDefinition />
                                    <RowDefinition />
                                    <RowDefinition />
                                    <RowDefinition />
                                    <RowDefinition />
                                </Grid.RowDefinitions>
                                
                                <TextBlock VerticalAlignment="Center">Company</TextBlock>
                                <ComboBox Grid.Column="1" DisplayMemberPath="Name" SelectedItem="{Binding DeployCompany,Mode=TwoWay}" ItemsSource="{Binding Companies}" Width="250" HorizontalAlignment="Left" Margin="10,10,10,10"/>

                                <TextBlock Grid.Row="1" VerticalAlignment="Center">IBSServer</TextBlock>
                                <ComboBox Grid.Row="1" Grid.Column="1" DisplayMemberPath="Name" SelectedItem="{Binding DeployIBSServer,Mode=TwoWay}" ItemsSource="{Binding IBSServers}" Width="250" HorizontalAlignment="Left" Margin="10,10,10,10"/>

                                <TextBlock Grid.Row="2" VerticalAlignment="Center">Environment</TextBlock>
                                <ComboBox Grid.Row="2" Grid.Column="1" DisplayMemberPath="Name" SelectedItem="{Binding DeployTaxiHailEnv,Mode=TwoWay}" ItemsSource="{Binding TaxiHailEnvironments}" Width="250" HorizontalAlignment="Left" Margin="10,10,10,10"/>

                                <TextBlock Grid.Row="4" VerticalAlignment="Center">Revision</TextBlock>
                                <TextBox Grid.Row="4" Grid.Column="1" Text="{Binding DeployRevision}"  VerticalAlignment="Center" HorizontalAlignment="Left" Width="100" Margin="10,10,10,10"></TextBox>
                                
                                <CheckBox Grid.Row="5" Grid.Column="1" Content="Deploy Database" IsChecked="{Binding DeployDB}" Width="250" HorizontalAlignment="Left" Margin="10,10,10,10"/>
                                <CheckBox Grid.Row="6" Grid.Column="1" Content="Drop/Create a new databse" IsChecked="{Binding DeployInitDatabse}" Width="250" HorizontalAlignment="Left" Margin="10,10,10,10"/>

                                <CheckBox Grid.Row="7" Grid.Column="1" Content="Server" IsChecked="{Binding DeployServer}" Width="250" HorizontalAlignment="Left" Margin="10,10,10,10"/>
                                <CheckBox Grid.Row="8" Grid.Column="1" Content="Android" IsChecked="{Binding DeployAndroid}" Width="250" HorizontalAlignment="Left" Margin="10,10,10,10"/>
                                <CheckBox Grid.Row="9" Grid.Column="1" Content="iOS" IsChecked="{Binding DeployIos}" Width="250" HorizontalAlignment="Left" Margin="10,10,10,10"/>

                                <Button Grid.Row="10" Grid.Column="1" Content="Deploy" Width="100" HorizontalAlignment="Left" Margin="10" Click="Button_Click_1" />
                            </Grid>
                        </StackPanel>
                        </ScrollViewer>
                    </GroupBox>
                </StackPanel>
            </TabItem>
            <TabItem Header="Options">
                <StackPanel Background="#FFE5E5E5">
                    <ComboBox Margin="10,10,10,10" x:Name="currentDbList">
                        <ComboBoxItem Content="Data Source=.;Initial Catalog=MKConfigurationManager;Integrated Security=True; MultipleActiveResultSets=True" />
                        <ComboBoxItem Content="Data Source=TaxiHail01;Initial Catalog=MKConfigurationManager;Integrated Security=True; MultipleActiveResultSets=True" />
                    </ComboBox>
                    <Button Content="Update" x:Name="updateCS" HorizontalAlignment="Left" Margin="10,10,0,0" VerticalAlignment="Top" Width="99" Click="updateCS_Click" />
                </StackPanel>
            </TabItem>
        </TabControl>
        <StatusBar x:Name="StatusBar" HorizontalAlignment="Left" VerticalAlignment="Top" Width="592" Height="30">
            <StatusBarItem>
                <TextBlock x:Name="statusBarTb"></TextBlock>
            </StatusBarItem>
        </StatusBar>
    </StackPanel>
</Window>
